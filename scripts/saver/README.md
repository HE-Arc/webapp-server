# Webapp saver

Script to archive and download active containers on the server.

## Setup

Followig values must be provided into a `.env` file:

```
SSH_CONNEXION='user@srv.domain.ch'
SRV_WORK_DIR='/home/user/saveproject' # Temporary empty work directory
SRV_COMPOSE_DIR='/home/user/teams' # Where the teams *-compose.yml files are saved

MYSQL_ROOT_PASSWORD='s3cur3@P45sw0rd'
POSTGRES_ROOT_PASSWORD='s3cur3@P45sw0rd'
```

Full example in `.env.example` 

## How to run

### Save project

Call `save-project.sh` followed by the project name and the container name. The project will be archived in the local directory.

```
$ ./save-project.sh 'movielist' 'teamsdjango2019_movielist_1'
```

### Restore project

Call `restore-project.sh` followed by the project name, the container name, the volume name and the local directory of the folder generated by `save-project`.

```
$ ./restore-project.sh 'caravel' 'teamslaravel2020_caravel_1' 'teamslaravel2020_caravel' './caravel/saveproject'
```
